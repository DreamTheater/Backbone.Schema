/*!
 * Backbone.Schema v0.1.0
 * https://github.com/DreamTheater/Backbone.Schema
 *
 * Copyright (c) 2013 Dmytro Nemoga
 * Released under the MIT license
 */
(function(){"use strict";var t=Backbone.Model;Backbone.Model=t.extend({readers:{string:function(t,e){return e},number:function(t,e){return Globalize.format(e,"n")},"boolean":function(t,e){return e},date:function(t,e){var r=new Date(e);return Globalize.format(r,"d")},text:function(t,e){return _.unescape(e)},currency:function(t,e){return Globalize.format(e,"c")},percent:function(t,e){return Globalize.format(e,"p")}},writers:{string:function(t,e){return e+""},number:function(t,e){var r=this.writers.string.call(this,t,e);return Globalize.parseFloat(r)},"boolean":function(t,e){return Boolean(e)},date:function(t,e){var r=Globalize.parseDate(e)||new Date(e);return r.getTime()},text:function(t,e){var r=this.writers.string.call(this,t,e);return r=_.unescape(r),_.escape(r)},currency:function(t,e){return this.writers.number.call(this,t,e)},percent:function(t,e){var r=this.writers.number.call(this,t,e);return _.isNumber(e)?r:r/100}},constructor:function(){t.apply(this,arguments)},addProperty:function(t,e,r){r=r||{};var n=this.get(t),i=r["default"],u=this.readers[e],a=this.writers[e];return _.isUndefined(i)&&(i=null),this.idAttribute=r.index?t:this.idAttribute,this.addGetter(t,function(t,e){return u.call(this,t,e)}),this.addSetter(t,function(t,e){var r={};return r[t]=_.isNull(e)||_.isUndefined(e)?i:a.call(this,t,e),r}),this.set(t,n,{silent:!0})}})})();