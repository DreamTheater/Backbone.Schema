/*!
 * Backbone.Schema v0.1.0
 * http://dreamtheater.github.com/Backbone.Schema
 *
 * Copyright (c) 2013 Dmytro Nemoga
 * Released under the MIT license
 */
(function(){"use strict";var t=Backbone.Model;Backbone.Model=t.extend({readers:{string:function(t){return t},number:function(t){return Globalize.format(t,"n")},"boolean":function(t){return t},date:function(t){var n=new Date(t);return Globalize.format(n,"d")},text:function(t){return _.unescape(t)},percent:function(t){return Globalize.format(t,"p")},currency:function(t){return Globalize.format(t,"c")}},writers:{string:function(t){return t+""},number:function(t){var n=this.string(t);return Globalize.parseFloat(n)},"boolean":function(t){return Boolean(t)},date:function(t){var n=Globalize.parseDate(t)||new Date(t);return n.getTime()},text:function(t){var n=this.string(t);return _.escape(n)},percent:function(t){var n=this.number(t);return n/100},currency:function(t){return this.number(t)}},constructor:function(){t.apply(this,arguments)},addProperty:function(t,n,r){return r=r||{},this.idAttribute=r.index||this.idAttribute,this.addGetter(t,function(t,r){return this.readers[n](r)}),this.addSetter(t,function(t,e){var i={};return i[t]=_.isNull(e)||_.isUndefined(e)?r["default"]||null:this.writers[n](e),i}),this}})})();